!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=t(1),u=t(2),l=t(3),a=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.writeF=null,this.fileMsg=null}var r,t,n;return r=e,(t=[{key:"mkdir",value:function(e,r){var t=u.parse(e);c.existsSync(t.dir)||this.mkdir(t.dir,(function(){c.mkdirSync(t.dir)})),r&&r()}},{key:"register",value:function(e,r){var t=this,n=l.decode(e.toString(),"; ","=");if(n={filename:n.filename.replace(/^"|"$/g,""),name:n.name.replace(/^"|"$/g,"")},this.fileMsg=i(i({success:!0},n),{},{errorMsg:""}),"function"==typeof r?r=r(n):r||(n.path="./",r=n),r.filename){var o=u.resolve(r.path,r.filename);this.mkdir(o,(function(e){t.writeF=c.createWriteStream(o),t.fileMsg.writePath=o}))}else this.fileMsg.errorMsg="it's not file data or value of filename is null",this.fileMsg.success=!1}},{key:"write",value:function(e){this.writeF&&this.writeF.write(e,(function(e){e&&console.error(e)}))}},{key:"close",value:function(){this.writeF&&this.writeF.end()}}])&&f(r.prototype,t),n&&f(r,n),e}();r.fileSave=function(e,r){return new Promise((function(t,n){var i=e.headers["content-type"].split("; ")[1].split("=")[1];if(!i)return console.warn("A boundary value illegal"),void n({ContentType:e.headers["content-type"],errorMsg:"A boundary value illegal,Please check the content-type"});var o="--"+i+"\r\n",f="--"+i+"--",c=Buffer.alloc(0),u=[],l=0,s=0;e.on("data",(function(e){!function(e){if(c=Buffer.concat([c,e]),!s)for(s=1;;){if(0==c.indexOf(f)||0==c.length)return s=0;var t=c.indexOf(o);if(0==l&&0==t)u.unshift(new a),c=c.slice(t+o.length),l=1;else if(1==l){var n=c.indexOf("\r\n");u[0].register(c.slice(0,n),r),c=c.slice(n+2),l=11}else if(2==l&&t>-1)u[0].write(c.slice(0,t)),c=c.slice(t),l=0;else if(2==l)u[0].write(c),c=Buffer.alloc(0);else if(11==l){var i=c.indexOf("\r\n");0==i?(l=2,c=c.slice(2)):c=c.slice(2+i)}}}(e)})).on("end",(function(e){var r=[];u.forEach((function(e){r.push(e.fileMsg),e.close()})),t(r)}))}))}},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("path")},function(e,r){e.exports=require("querystring")}]));